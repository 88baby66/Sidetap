// Generated by CoffeeScript 1.3.1
(function() {

  $(document).ready(function() {
    var about, detail, gallery, render_thumbnails, show_image, st, thumbnails;
    st = sidetap();
    gallery = $('#gallery');
    thumbnails = gallery.find('.thumbnails');
    detail = $('#detail');
    about = $('#about');
    $('header .menu').click(st.toggle_nav);
    $('header .info').click(function() {
      return st.show_section(about, {
        animation: 'upfrombottom'
      });
    });
    $('#about  a.cancel').click(function() {
      return st.show_section(gallery, {
        animation: 'downfromtop'
      });
    });
    $('#detail a.back').click(function() {
      return st.show_section(gallery, {
        animation: 'infromleft'
      });
    });
    $.getJSON('assets/json/images.json', function(images) {
      render_thumbnails(st.stp_nav.find('a.selected').text(), images);
      return st.stp_nav.find('nav a').click(function() {
        $(this).addClass('selected').siblings().removeClass('selected');
        st.toggle_nav();
        render_thumbnails($(this).text(), images);
        return false;
      });
    });
    render_thumbnails = function(section, images) {
      var i, img, _i, _len, _ref;
      thumbnails.empty();
      _ref = images[section];
      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
        img = _ref[i];
        thumbnails.append($("<li" + ((i + 1) % 4 === 0 ? ' class="right"' : '') + ">\n  <a href='javascript:void(0)'>\n    <img src='" + img.url_s + "' alt='" + i + "' />\n  </a>\n</li>"));
      }
      gallery.find('h1').text(section + ' Bears');
      return $('#gallery .thumbnails a').click(function() {
        return show_image(images[section][$(this).find('img').prop('alt')]);
      });
    };
    return show_image = function(img) {
      detail.find('.stp-content-body img').prop('src', img.url_m);
      detail.find('cite').html(img.title);
      detail.find('[rel="author"]').prop('href', "http://flickr.com/photos/" + img.owner + "/" + img.id).html(img.ownername);
      return st.show_section(detail, {
        animation: 'infromright'
      });
    };
  });

}).call(this);
